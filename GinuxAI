<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GinuxAI - Inteligencia Artificial</title>
    <style>
        :root { 
            --primary: #00d4ff; 
            --bg-dark: #0b0e14; 
            --panel: #151921; 
            --border: #30363d; 
            --user-msg: #00d4ff;
            --bot-msg: #21262d;
        }

        * { box-sizing: border-box; }
        body { 
            font-family: 'Inter', 'Segoe UI', sans-serif; 
            background-color: var(--bg-dark); 
            color: #e6edf3; 
            margin: 0; 
            display: flex; 
            height: 100vh;
        }

        /* --- SIDEBAR --- */
        #sidebar { 
            width: 280px; 
            background: var(--panel); 
            border-right: 1px solid var(--border); 
            display: flex; 
            flex-direction: column; 
            padding: 20px;
            transition: 0.3s;
        }

        @media (max-width: 768px) { #sidebar { display: none; } } /* Ocultar en móviles */

        .new-chat-btn {
            background: transparent;
            border: 1px solid var(--border);
            color: white;
            padding: 10px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            margin-bottom: 20px;
            transition: 0.3s;
        }

        .new-chat-btn:hover { background: #30363d; border-color: var(--primary); }

        #chat-list { flex-grow: 1; overflow-y: auto; }
        .chat-item { 
            padding: 10px; 
            border-radius: 6px; 
            font-size: 13px; 
            cursor: pointer; 
            margin-bottom: 5px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        .chat-item:hover { background: #1c2128; color: var(--primary); }

        /* --- CHAT MAIN --- */
        #main-chat { 
            flex-grow: 1; 
            display: flex; 
            flex-direction: column; 
            position: relative;
        }

        #chat-header {
            padding: 15px 25px;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: var(--bg-dark);
        }

        .ai-name { font-weight: 800; color: var(--primary); font-size: 1.2rem; letter-spacing: -1px; }

        .toggles { display: flex; gap: 15px; font-size: 10px; font-weight: bold; color: #8b949e; }
        
        /* SWITCH */
        .switch { position: relative; display: inline-block; width: 30px; height: 16px; margin-left: 5px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background: #333; border-radius: 20px; transition: .4s; }
        .slider:before { position: absolute; content: ""; height: 10px; width: 10px; left: 3px; bottom: 3px; background: white; border-radius: 50%; transition: .4s; }
        input:checked + .slider { background: var(--primary); }
        input:checked + .slider:before { transform: translateX(14px); }

        #chat-window { 
            flex-grow: 1; 
            overflow-y: auto; 
            padding: 20px 10%; 
            display: flex; 
            flex-direction: column; 
            gap: 20px;
            scroll-behavior: smooth;
        }

        .msg { padding: 15px 20px; border-radius: 12px; line-height: 1.6; max-width: 85%; font-size: 15px; }
        .user { align-self: flex-end; background: var(--user-msg); color: #000; font-weight: 500; }
        .bot { align-self: flex-start; background: var(--bot-msg); border: 1px solid var(--border); }

        .img-card { width: 100%; border-radius: 10px; border: 1px solid var(--primary); margin-top: 10px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }

        /* INPUT AREA */
        #input-container { padding: 20px 10%; background: var(--bg-dark); }
        .input-wrapper {
            display: flex;
            background: var(--panel);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 10px 15px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
        }

        input {
            flex-grow: 1;
            background: transparent;
            border: none;
            color: white;
            outline: none;
            padding: 10px;
            font-size: 16px;
        }

        #send-btn { 
            background: var(--primary); 
            border: none; 
            color: black; 
            width: 40px; 
            height: 40px; 
            border-radius: 8px; 
            cursor: pointer; 
            font-weight: bold;
            transition: 0.2s;
        }
        #send-btn:hover { transform: scale(1.05); }

        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-thumb { background: #30363d; border-radius: 10px; }
    </style>
</head>
<body>

<aside id="sidebar">
    <button class="new-chat-btn" onclick="newChat()">+ Nuevo Chat</button>
    <div id="chat-list"></div>
    <button onclick="clearAll()" style="color: #f85149; background: none; border: none; cursor: pointer; font-size: 12px;">Borrar Historial</button>
</aside>

<main id="main-chat">
    <header id="chat-header">
        <div class="ai-name">GinuxAI</div>
        <div class="toggles">
            <span>SARCASMO <label class="switch"><input type="checkbox" id="sar-toggle"><span class="slider"></span></label></span>
            <span>SPAM <label class="switch"><input type="checkbox" id="spam-toggle"><span class="slider"></span></label></span>
        </div>
    </header>

    <div id="chat-window"></div>

    <div id="input-container">
        <div class="input-wrapper">
            <input type="text" id="user-input" placeholder="Hazme una pregunta o pide una foto..." onkeypress="if(event.key==='Enter') sendMessage()">
            <button id="send-btn" onclick="sendMessage()">➤</button>
        </div>
    </div>
</main>

<script>
    const chatWindow = document.getElementById('chat-window');
    const input = document.getElementById('user-input');
    const chatList = document.getElementById('chat-list');
    
    let activeId = Date.now();
    let db = JSON.parse(localStorage.getItem('ginux_ai_v13')) || {};
    let spammer = null;

    const SARCASM_POOL = [
        "Vaya, otra pregunta que cambiará el mundo... o no.",
        "Error 404: Paciencia no encontrada.",
        "Incluso con mi velocidad de luz, me aburro esperando algo inteligente.",
        "¿Te ayudaron mucho tus dos neuronas para pensar eso?",
        "Qué pregunta tan... vintage."
    ];

    const JOKES = [
        "¿Qué hace un programador en la playa? Mira el mar de datos.",
        "¿Por qué los programadores no les gusta el exterior? Hay demasiados bugs.",
        "Hardware es lo que golpeas, software es lo que insultas."
    ];

    function sendMessage() {
        const val = input.value.trim();
        if(!val) return;
        appendMsg(val, 'user');
        input.value = "";
        const q = val.toLowerCase();

        if(q === "para") { clearInterval(spammer); return; }

        setTimeout(() => {
            const sarOn = document.getElementById('sar-toggle').checked;
            
            if(q.includes("chiste")) {
                const j = JOKES[Math.floor(Math.random()*JOKES.length)];
                appendMsg((sarOn ? "Ríete si puedes: " : "Aquí tienes: ") + j, 'bot');
            }
            else if(q.includes("foto") || q.includes("imagen")) {
                const term = q.replace(/.*(foto|imagen|busca) de\s*/, "").trim();
                appendMsg(`Buscando visuales para: ${term}...`, 'bot');
                appendImg(`https://source.unsplash.com/800x600/?${term}`);
            }
            else if(q.match(/(\d+)\s*([\+\-\*\/])\s*(\d+)/)) {
                const m = q.match(/(\d+)\s*([\+\-\*\/])\s*(\d+)/);
                const res = eval(m[0]);
                appendMsg((sarOn ? "Incluso un ábaco sabría que es " : "Resultado: ") + res, 'bot');
            }
            else if(q.startsWith("spamea ") && document.getElementById('spam-toggle').checked) {
                const s = val.substring(7);
                spammer = setInterval(() => appendMsg(s, 'bot'), 1000);
            }
            else {
                appendMsg(sarOn ? SARCASM_POOL[Math.floor(Math.random()*SARCASM_POOL.length)] : "GinuxAI: No tengo información sobre eso, pero puedo buscar fotos o calcular por ti.", 'bot');
            }
            save();
        }, 600);
    }

    function appendMsg(t, s) {
        const d = document.createElement('div'); d.className = `msg ${s}`; d.innerText = t;
        chatWindow.appendChild(d); chatWindow.scrollTop = chatWindow.scrollHeight;
    }

    function appendImg(url) {
        const d = document.createElement('div'); d.className = 'msg bot';
        const i = document.createElement('img'); i.src = url; i.className = 'img-card';
        i.onload = () => chatWindow.scrollTop = chatWindow.scrollHeight;
        d.appendChild(i); chatWindow.appendChild(d);
    }

    function save() { db[activeId] = chatWindow.innerHTML; localStorage.setItem('ginux_ai_v13', JSON.stringify(db)); renderHistory(); }
    
    function renderHistory() {
        chatList.innerHTML = "";
        Object.keys(db).reverse().forEach(id => {
            const item = document.createElement('div'); item.className = 'chat-item';
            item.innerText = "Chat " + new Date(parseInt(id)).toLocaleTimeString();
            item.onclick = () => { activeId = id; chatWindow.innerHTML = db[id]; };
            chatList.appendChild(item);
        });
    }

    function newChat() { clearInterval(spammer); activeId = Date.now(); chatWindow.innerHTML = '<div class="msg bot">Hola, soy <b>GinuxAI</b>. ¿Cómo puedo ayudarte hoy?</div>'; }
    function clearAll() { localStorage.removeItem('ginux_ai_v13'); db = {}; renderHistory(); newChat(); }

    newChat(); renderHistory();
</script>
</body>
</html>
